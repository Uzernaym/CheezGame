<!DOCTYPE html>
<link rel="stylesheet" type="text/css" href="index.css">
<html>
  <head>
  <title>CheezIt</title>
  </head>
  <body>
    <div>
      <label>Name?</label>
        <input type='text' name='Name'>
    </div>
    <div>
      <label>Email?</label>
      <input type='text' name="Email">
    </div>
    <div>
      <label>How old are you?</label>
      <input type='text' name="Age">
    </div>
    <div>
	     <label>Password</label>
	      <input type='password' name='password'>
    </div>
    <div>
	     <label>Verify Password</label>
	     <input type='password' name='verifyPassword'>
    </div>
    <button>Submit</button>
  </body>
  <script>
  var $inputs = document.querySelectorAll('input');
  var $button = document.querySelector('button');

  function storeData() {

// Sending the data only if the passwords match
  if(!verifyPassword()) return;
  var data = {};

// In the function storeData:
  for(var i = 0; i < $inputs.length; i++) {
    var $input = $inputs[i];
    if($input.type === 'text' || $input.type === 'password') {
      data[$input.name] =  $input.value;
    } else if($input.type === 'checkbox') {
      data[$input.name] =  $input.checked;
    } else if ($input.type === 'radio' && $input.checked) {
      data[$input.name] = $input.getAttribute('answer');
    }
  }
  sendData(data);
  }

  function verifyPassword() {

    var $passwords = document.querySelectorAll('input[type="password"]');
    var isSamePassword = $passwords[0].value === $passwords[1].value;
    if(!isSamePassword) {
      alert("Please enter the same password!")
    }
    return isSamePassword;
  }


    function sendData(data) {
      var req = new XMLHttpRequest();

      req.open('POST', '/form', true);
      req.setRequestHeader('content-type', 'application/json')
      req.send(JSON.stringify(data));
    }

    function submit() {
	     var formData = storeData();
	      sendData(formData);
    }

    $button.addEventListener('click', storeData);
  </script>
</html>
